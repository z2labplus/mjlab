#!/usr/bin/env python3
"""
å››å·éº»å°†æ ¸å¿ƒæ•°å­¦å·¥å…· - ç›´æ¥å›ç­”ç”¨æˆ·é—®é¢˜
1. å¦‚ä½•åˆ¤æ–­èƒ¡ç‰Œï¼Ÿ
2. ä»€ä¹ˆæ˜¯æœ‰æ•ˆè¿›å¼ ï¼Ÿ
3. ç”¨ä»€ä¹ˆæ•°å­¦å·¥å…·ï¼Ÿ
"""

def main_concepts():
    print("=" * 80)
    print("ğŸ¯ å››å·éº»å°†æ ¸å¿ƒæ•°å­¦å·¥å…·è§£ç­”")
    print("=" * 80)
    
    print("\nğŸ”¢ **æ ¸å¿ƒæ•°æ®ç»“æ„ï¼š27ä½é¢‘ç‡æ•°ç»„**")
    print("   ä½ç½®  0-8:  1ä¸‡-9ä¸‡")
    print("   ä½ç½®  9-17: 1æ¡-9æ¡") 
    print("   ä½ç½® 18-26: 1ç­’-9ç­’")
    print("   å€¼ï¼šè¯¥ä½ç½®ç‰Œçš„æ•°é‡(0-4)")
    
    print("\n   ç¤ºä¾‹ï¼š[1,1,1,1,1,1,1,1,1, 2,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0]")
    print("        â†‘ ä¸‡å­—1-9å„1å¼      â†‘ 1æ¡2å¼         â†‘ æ— ç­’å­")
    
    print("\nğŸ† **èƒ¡ç‰Œåˆ¤æ–­çš„ä¸¤ä¸ªæ¡ä»¶**")
    print("\n   æ¡ä»¶1ï¼šæ ‡å‡†èƒ¡ç‰Œ (4é¢å­+1å¯¹å­)")
    print("   ç®—æ³•ï¼š")
    print("   â”Œâ”€ æšä¸¾æ¯ä¸ªä½ç½®ä½œä¸ºå¯¹å­")
    print("   â”œâ”€ ç§»é™¤å¯¹å­åï¼Œé€’å½’æ£€æŸ¥å‰©ä½™ç‰Œ")
    print("   â”œâ”€ å°è¯•ç»„æˆåˆ»å­(3å¼ ç›¸åŒ)")
    print("   â”œâ”€ å°è¯•ç»„æˆé¡ºå­(è¿ç»­3å¼ )")
    print("   â””â”€ æ£€æŸ¥æ˜¯å¦æ­£å¥½ç»„æˆ4ä¸ªé¢å­")
    
    print("\n   æ¡ä»¶2ï¼šä¸ƒå¯¹èƒ¡ç‰Œ (7ä¸ªå¯¹å­)")
    print("   ç®—æ³•ï¼š")
    print("   â”Œâ”€ ç»Ÿè®¡æ•°ç»„ä¸­å€¼ä¸º2çš„ä½ç½®(1å¯¹)")
    print("   â”œâ”€ ç»Ÿè®¡æ•°ç»„ä¸­å€¼ä¸º4çš„ä½ç½®(2å¯¹)")
    print("   â”œâ”€ æ£€æŸ¥å…¶ä»–ä½ç½®æ˜¯å¦ä¸º0")
    print("   â””â”€ æ€»å¯¹æ•° = 2çš„ä¸ªæ•° + 4çš„ä¸ªæ•°Ã—2 = 7")
    
    print("\nğŸ¯ **æœ‰æ•ˆè¿›å¼ çš„å®šä¹‰ä¸è®¡ç®—**")
    print("\n   å®šä¹‰ï¼šæ‘¸åˆ°åèƒ½è®©å‘å¬æ•°å‡å°‘çš„ç‰Œ")
    print("   å‘å¬æ•°ï¼šè·ç¦»å¬ç‰Œè¿˜éœ€è¦çš„ç‰Œæ•°")
    
    print("\n   è®¡ç®—æ­¥éª¤ï¼š")
    print("   â”Œâ”€ 1. è®¡ç®—å½“å‰å‘å¬æ•°")
    print("   â”œâ”€ 2. éå†æ‰€æœ‰å¯èƒ½çš„ç‰Œ(27ç§)")
    print("   â”œâ”€ 3. æ¨¡æ‹Ÿæ‘¸åˆ°æ¯å¼ ç‰Œåçš„å‘å¬æ•°")
    print("   â”œâ”€ 4. å¦‚æœæ–°å‘å¬æ•° < å½“å‰å‘å¬æ•°")
    print("   â””â”€ 5. è¯¥ç‰Œå°±æ˜¯æœ‰æ•ˆè¿›å¼ ")
    
    print("\nğŸ“Š **å®é™…ä»£ç ç¤ºä¾‹**")
    
    # èƒ¡ç‰Œæ£€æµ‹æ ¸å¿ƒä»£ç 
    print("\n   èƒ¡ç‰Œæ£€æµ‹ä»£ç ï¼š")
    print("""
def is_winning(tiles_array):
    # æ–¹æ³•1ï¼šæ£€æŸ¥æ ‡å‡†èƒ¡ç‰Œ
    for i in range(27):
        if tiles_array[i] >= 2:  # å°è¯•ä½œä¸ºå¯¹å­
            temp = tiles_array.copy()
            temp[i] -= 2
            if check_4_melds(temp):
                return True
    
    # æ–¹æ³•2ï¼šæ£€æŸ¥ä¸ƒå¯¹
    pairs = sum(1 for x in tiles_array if x == 2)
    quads = sum(1 for x in tiles_array if x == 4)
    others = sum(1 for x in tiles_array if x not in [0,2,4])
    return others == 0 and pairs + quads*2 == 7
""")
    
    # æœ‰æ•ˆè¿›å¼ è®¡ç®—ä»£ç 
    print("\n   æœ‰æ•ˆè¿›å¼ è®¡ç®—ä»£ç ï¼š")
    print("""
def get_effective_draws(tiles_array):
    current_shanten = calculate_shanten(tiles_array)
    effective = []
    
    for i in range(27):  # éå†27ç§ç‰Œ
        if tiles_array[i] < 4:  # è¯¥ç‰Œè¿˜æœ‰å‰©ä½™
            tiles_array[i] += 1  # æ¨¡æ‹Ÿæ‘¸åˆ°
            new_shanten = calculate_shanten(tiles_array)
            
            if new_shanten < current_shanten:
                effective.append(i)  # è¿™æ˜¯æœ‰æ•ˆè¿›å¼ 
            
            tiles_array[i] -= 1  # æ¢å¤åŸçŠ¶æ€
    
    return effective
""")
    
    print("\nğŸ’¡ **å…³é”®ä¼˜åŒ–æŠ€å·§**")
    print("\n   1. é¢„è®¡ç®—ï¼šæå‰è®¡ç®—æ‰€æœ‰å¯èƒ½çš„é¢å­ç»„åˆ")
    print("   2. ä½è¿ç®—ï¼šä½¿ç”¨ä½æ“ä½œåŠ é€Ÿæ•°ç»„æ¯”è¾ƒ")
    print("   3. å‰ªæï¼šæå‰ç»ˆæ­¢ä¸å¯èƒ½çš„é€’å½’åˆ†æ”¯")
    print("   4. ç¼“å­˜ï¼šè®°ä½å·²è®¡ç®—çš„å‘å¬æ•°ç»“æœ")
    
    print("\nğŸ”„ **ç®—æ³•å¤æ‚åº¦åˆ†æ**")
    print("   â€¢ 27ä½æ•°ç»„æ“ä½œï¼šO(1)")
    print("   â€¢ èƒ¡ç‰Œæ£€æµ‹ï¼šO(27Ã—é€’å½’æ·±åº¦) â‰ˆ O(100)")
    print("   â€¢ æœ‰æ•ˆè¿›å¼ è®¡ç®—ï¼šO(27Ã—å‘å¬æ•°è®¡ç®—) â‰ˆ O(2700)")
    print("   â€¢ å®é™…æ€§èƒ½ï¼šæ¯«ç§’çº§å“åº”")
    
    print("\nğŸ² **å®æˆ˜åº”ç”¨åœºæ™¯**")
    print("   âœ… å®æ—¶èƒ¡ç‰Œåˆ¤æ–­ï¼šæ¯æ¬¡æ‘¸ç‰Œ/ç¢°ç‰Œ/æ ç‰Œå")
    print("   âœ… å‡ºç‰Œå»ºè®®ï¼šè®¡ç®—å¼ƒç‰Œåçš„å‘å¬æ•°å˜åŒ–")
    print("   âœ… å¬ç‰Œæ£€æµ‹ï¼šå‘å¬æ•°ä¸º0æ—¶çš„èƒ¡ç‰Œå¼ è®¡ç®—")
    print("   âœ… AIå†³ç­–ï¼šåŸºäºæœ‰æ•ˆè¿›å¼ æ•°é‡è¯„ä¼°ç‰ŒåŠ›")
    
    print("\n" + "=" * 80)
    print("âœ… æ€»ç»“ï¼š27ä½æ•°ç»„+é€’å½’ç®—æ³•+å‘å¬æ•°è®¡ç®— = å®Œæ•´çš„éº»å°†æ•°å­¦å·¥å…·åŒ…")
    print("=" * 80)


def practical_examples():
    """å®ç”¨ç¤ºä¾‹"""
    print("\nğŸ§ª **å®ç”¨è®¡ç®—ç¤ºä¾‹**")
    
    examples = [
        {
            "name": "å¬ç‰ŒçŠ¶æ€",
            "hand": [1,1,1,1,1,1,1,1,0, 0,0,0,0,0,0,0,0,0, 2,0,0,0,0,0,0,0,0],
            "description": "123456788ä¸‡ + 11ç­’ï¼Œå¬9ä¸‡"
        },
        {
            "name": "ä¸€å‘å¬",
            "hand": [1,1,1,1,1,1,1,0,0, 1,1,1,0,0,0,0,0,0, 2,0,0,0,0,0,0,0,0],
            "description": "1234567ä¸‡123æ¡11ç­’ï¼Œä¸€å‘å¬"
        },
        {
            "name": "ä¸ƒå¯¹å¬ç‰Œ",
            "hand": [2,2,2,2,2,2,0,0,0, 0,0,0,0,0,0,0,0,0, 2,0,0,0,0,0,0,0,0],
            "description": "112233445566ä¸‡11ç­’ï¼Œå¬7ä¸‡"
        }
    ]
    
    for ex in examples:
        print(f"\nğŸ“‹ {ex['name']}ï¼š{ex['description']}")
        hand = ex['hand']
        
        # ç»Ÿè®¡åŸºæœ¬ä¿¡æ¯
        total_tiles = sum(hand)
        suits_used = 0
        if any(hand[0:9]): suits_used += 1
        if any(hand[9:18]): suits_used += 1  
        if any(hand[18:27]): suits_used += 1
        
        print(f"   æ€»ç‰Œæ•°: {total_tiles}å¼ ")
        print(f"   ä½¿ç”¨èŠ±è‰²: {suits_used}é—¨")
        print(f"   27ä½æ•°ç»„: {hand}")
        
        # åˆ†æç»“æ„
        pairs = sum(1 for x in hand if x == 2)
        triplets = sum(1 for x in hand if x == 3)
        quads = sum(1 for x in hand if x == 4)
        
        print(f"   å¯¹å­: {pairs}ä¸ª, åˆ»å­: {triplets}ä¸ª, æ å­: {quads}ä¸ª")
        
        # åˆ¤æ–­èƒ¡ç‰Œç±»å‹
        if pairs + quads*2 == 7 and all(x in [0,2,4] for x in hand):
            print("   âœ… ä¸ƒå¯¹èƒ¡ç‰Œ")
        elif total_tiles == 14:
            print("   ğŸ¯ å¯èƒ½çš„æ ‡å‡†èƒ¡ç‰Œ")
        else:
            print("   âŒ æœªå®ŒæˆçŠ¶æ€")


if __name__ == "__main__":
    main_concepts()
    practical_examples()